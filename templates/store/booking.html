{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>نموذج الحجز</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --brand:#e67e22; --brand-dark:#d35400;
      --bg:#fffaf0; --card:#fff; --text:#333; --muted:#666; --border:#eaeaea;
      --shadow:0 6px 20px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{font-family:'Tajawal',sans-serif;margin:0;padding:0;background:var(--bg);color:var(--text)}
    .wrap{max-width:780px;margin:30px auto 60px;padding:0 16px}
    .card{background:var(--card);border-radius:20px;box-shadow:var(--shadow);padding:28px;border:1px solid var(--border)}

    h1{text-align:center;font-size:26px;margin:0 0 8px;color:var(--brand)}
    .desc{text-align:center;color:var(--muted);margin-bottom:20px}

    form{display:grid;gap:18px}
    label{font-weight:700;display:block;margin-bottom:6px}

    input[type="text"],input[type="tel"],select{
      width:100%;padding:12px 14px;border:1px solid #ddd;border-radius:12px;
      font-size:16px;outline:none;background:#fff;transition:.2s
    }
    input:focus,select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(230,126,34,.15)}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media(max-width:640px){.row{grid-template-columns:1fr}}

    /* ✅ المواد الدراسية كبطاقات */
    .subjects{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}
    .subject-card{position:relative;cursor:pointer;text-align:center;font-weight:600;border:2px solid #ddd;border-radius:12px;padding:14px;background:#f9f9f9;transition:.3s}
    .subject-card input{display:none}
    .subject-card span{display:block}
    .subject-card input:checked + span{background:linear-gradient(135deg,var(--brand),var(--brand-dark));color:#fff;border-radius:8px;padding:6px}

    button.btn{
      border:none;cursor:pointer;font-weight:700;border-radius:999px;
      padding:14px 18px;font-size:16px;width:100%;
      background:linear-gradient(135deg,var(--brand),var(--brand-dark));
      color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.1);transition:.2s
    }
    button.btn:hover{opacity:.95}
    button.btn:active{transform:scale(.98)}
  </style>
</head>
<body>

  {% include "header.html" %}

  <div class="wrap">
    <div class="card">
      <h1>📌 احجز الآن</h1>
      <p class="desc">أدخل بياناتك وسيتم التواصل معك لتأكيد الموعد.</p>

      <form method="post" action="{% url 'store:booking' %}">
        {% csrf_token %}

        <!-- المنتج / الدورة -->
        <div>
          <label>📚 المنتج / الدورة (اختياري)</label>
          {% if selected_product %}
            <div class="pill">{{ selected_product.name }}</div>
            <input type="hidden" name="product_id" value="{{ selected_product.id }}">
          {% else %}
            <select name="product_id">
              <option value="">بدون اختيار</option>
              {% for p in products %}
                <option value="{{ p.id }}">{{ p.name }}</option>
              {% endfor %}
            </select>
          {% endif %}
        </div>

        <div class="row">
          <div>
            <label>👤 الاسم الكامل</label>
            <input type="text" name="name" placeholder="مثال: محمد أحمد" required />
          </div>
          <div>
            <label>📞 رقم الجوال</label>
            <input type="tel" name="phone" placeholder="+9665xxxxxxxx" required pattern="^\+?\d{8,15}$" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>🎓 المرحلة الدراسية</label>
            <select name="stage" required>
              <option value="">اختر المرحلة</option>
              <option value="ابتدائي">ابتدائي</option>
              <option value="متوسط">متوسط</option>
              <option value="ثانوي">ثانوي</option>
              <option value="جامعي">جامعي</option>
            </select>
          </div>
          <div>
            <label>📘 المواد الدراسية</label>
            <div class="subjects">
              <label class="subject-card">
                <input type="checkbox" name="subjects" value="رياضيات"><span>📐 رياضيات</span>
              </label>
              <label class="subject-card">
                <input type="checkbox" name="subjects" value="علوم"><span>🔬 علوم</span>
              </label>
              <label class="subject-card">
                <input type="checkbox" name="subjects" value="لغة إنجليزية"><span>📘 إنجليزي</span>
              </label>
              <label class="subject-card">
                <input type="checkbox" name="subjects" value="حاسب"><span>💻 حاسب</span>
              </label>
            </div>
          </div>
        </div>

        <button type="submit" class="btn">🚀 احجز الآن</button>
      </form>
    </div>
  </div>

  {% include "footer.html" %}

</body>
</html>
