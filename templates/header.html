{% load static %}
<header class="site-header" dir="rtl">
  <div class="container">
    <!-- âœ… Ø§Ù„Ø´Ø¹Ø§Ø± -->
    <a class="logo" href="/">
      <img src="https://res.cloudinary.com/dlql12ycp/image/upload/v1754102032/logo_dexumq.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹">
    </a>

    <!-- âœ… Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ -->
    <button id="menu-toggle" class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">
      <i class="fas fa-bars"></i>
    </button>

    <!-- âœ… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· -->
    <nav id="main-nav" class="nav">
      <a href="/"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="/products/"><i class="fas fa-box"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
      <a href="/contact/"><i class="fas fa-phone"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
      <a href="/cart/" class="btn-cart"><i class="fas fa-shopping-cart"></i> Ø§Ù„Ø³Ù„Ø©</a>

      {% if user.is_authenticated %}
        {% if user.is_student %}
          <a href="/student/dashboard/" class="role student"><i class="fas fa-user-graduate"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</a>
        {% elif user.is_teacher %}
          <a href="/teacher/dashboard/" class="role teacher"><i class="fas fa-chalkboard-teacher"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„Ù…</a>
        {% endif %}
        <span class="hello">ğŸ‘‹ {{ user.get_full_name|default:user.username }}</span>
        <a href="/logout/" class="logout"><i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</a>
      {% else %}
        <a href="/login/" class="btn-outline login"><i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</a>
        <a href="/register/" class="btn-outline register"><i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
      {% endif %}
    </nav>
  </div>
</header>

<!-- âœ… Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¶Ø¨Ø§Ø¨ÙŠØ© -->
<div id="overlay" class="overlay"></div>

<!-- ğŸ¨ CSS -->
<style>
  :root{
    --primary:#4f46e5;
    --accent:#f97316;
    --light:#f9fafb;
    --ink:#1f2937;
    --ok:#16a34a;
    --danger:#dc2626;
    --shadow:0 6px 20px rgba(0,0,0,.08);
    --radius:16px;
    --container:1180px;
  }

  .site-header{
    background: linear-gradient(90deg, var(--primary), var(--accent));
    position:sticky; top:0; z-index:100;
    box-shadow: var(--shadow);
  }

  .site-header .container{
    max-width:var(--container);
    margin:auto;
    padding:14px 18px;
    display:flex; align-items:center; justify-content:space-between; gap:12px;
  }

  /* Ø´Ø¹Ø§Ø± */
  .logo img{
    height:48px; width:auto;
    border-radius:10px;
    background:#fff;
    padding:4px;
    box-shadow:0 3px 12px rgba(0,0,0,.15);
  }

  /* Ø±ÙˆØ§Ø¨Ø· */
  .nav{display:flex; align-items:center; gap:20px; flex-wrap:wrap}
  .nav a{
    text-decoration:none; color:white; font-weight:600;
    padding:8px 12px; border-radius:8px; transition:.25s;
    font-size:15px; display:flex; align-items:center; gap:8px;
  }
  .nav a:hover{background:rgba(255,255,255,.15);}

  /* Ø²Ø± Ø§Ù„Ø³Ù„Ø© */
  .btn-cart{
    background:var(--accent);
    color:#fff !important;
    padding:8px 14px;
    border-radius:10px;
    font-weight:700;
    box-shadow:0 6px 18px rgba(249,115,22,.35);
    transition:0.3s;
  }
  .btn-cart:hover{background:#ea580c;}

  /* Ø£Ø²Ø±Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ */
  .btn-outline{
    border:1px solid #fff;
    padding:6px 12px;
    border-radius:6px;
    font-weight:600;
    transition:0.3s;
  }
  .btn-outline:hover{
    background:#fff;
    color:var(--primary) !important;
  }

  /* Ø£Ø¯ÙˆØ§Ø± + ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ */
  .role.student{color:var(--ok)}
  .role.teacher{color:#fff; background:#2563eb; padding:6px 10px; border-radius:6px;}
  .hello{color:#f1f5f9; font-weight:600}
  .logout{background:var(--danger); color:#fff; padding:6px 12px; border-radius:6px; font-weight:700}
  .logout:hover{background:#b91c1c;}

  /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
  .menu-toggle{
    display:none;
    border:0;
    background:#fff;
    border-radius:10px;
    padding:8px 12px;
    font-size:18px;
    cursor:pointer;
    box-shadow:var(--shadow);
  }

  /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¶Ø¨Ø§Ø¨ÙŠØ© */
  .overlay{
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(255,255,255,0.25);
    backdrop-filter:blur(8px);
    opacity:0;
    visibility:hidden;
    transition:opacity 0.3s ease;
    z-index:90;
  }
  .overlay.active{
    opacity:1;
    visibility:visible;
  }

  /* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
  @media (max-width: 768px){
    .menu-toggle{display:block}
    .nav{
      position:absolute;
      top:70px; right:10px;
      flex-direction:column;
      background:rgba(255,255,255,0.7);
      backdrop-filter: blur(12px);
      border-radius:var(--radius);
      padding:16px;
      width:240px;
      box-shadow:0 8px 30px rgba(0,0,0,.15);
      text-align:right;
      z-index:120;

      opacity:0;
      pointer-events:none;
      transform:translateY(-20px) translateX(20px);
    }
    .nav a, .nav span{margin:6px 0; color:var(--ink);}
    .nav.active{
      opacity:1;
      pointer-events:auto;
      animation: bounceIn 0.6s ease forwards;
    }
    .nav.closing{
      animation: slideOut 0.4s ease forwards;
    }
  }

  /* âœ¨ Ø­Ø±ÙƒØ© Ø§Ù„ÙØªØ­ */
  @keyframes bounceIn {
    0%   { transform:translateY(-30px) translateX(20px); opacity:0 }
    60%  { transform:translateY(5px) translateX(0); opacity:1 }
    80%  { transform:translateY(-3px); }
    100% { transform:translateY(0); }
  }

  /* âœ¨ Ø­Ø±ÙƒØ© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ */
  @keyframes slideOut {
    0%   { opacity:1; transform:translateY(0); }
    100% { opacity:0; transform:translateY(-20px) translateX(20px); }
  }
</style>

<!-- âš¡ JS -->
<script>
  document.addEventListener('DOMContentLoaded', function(){
    const toggle = document.getElementById('menu-toggle');
    const nav = document.getElementById('main-nav');
    const overlay = document.getElementById('overlay');
    if (!toggle || !nav || !overlay) return;

    function closeMenu(){
      nav.classList.remove('active');
      nav.classList.add('closing');
      overlay.classList.remove('active');
      toggle.innerHTML = '<i class="fas fa-bars"></i>';
      toggle.setAttribute('aria-expanded', 'false');

      nav.addEventListener('animationend', function handler(){
        nav.classList.remove('closing');
        nav.removeEventListener('animationend', handler);
      });
    }

    toggle.addEventListener('click', function(){
      if(nav.classList.contains('active')){
        closeMenu();
      } else {
        nav.classList.add('active');
        overlay.classList.add('active');
        toggle.innerHTML = '<i class="fas fa-times"></i>';
        toggle.setAttribute('aria-expanded', 'true');
      }
    });

    overlay.addEventListener('click', closeMenu);

    nav.addEventListener('click', function(e){
      if (getComputedStyle(toggle).display === 'none') return;
      if (e.target.tagName.toLowerCase() === 'a'){
        closeMenu();
      }
    });
  });
</script>

<!-- ğŸ“¦ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
