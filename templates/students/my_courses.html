{% load static %}
{% include "header.html" %}
<div class="wrapper" style="max-width:1100px;margin:0 auto;padding:30px 16px;" dir="rtl" aria-labelledby="my-courses-title">
  <h2 id="my-courses-title" style="margin:0 0 16px 0;">Ø¯ÙˆØ±Ø§ØªÙŠ</h2>

  {% if enrollments %}
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;">
      {% for e in enrollments %}
        <article style="background:linear-gradient(180deg,#f7fafd,#ffffff);
                        border:1px solid #e7eef5;border-radius:16px;padding:16px;
                        box-shadow:0 4px 16px rgba(0,0,0,.04);display:flex;flex-direction:column;gap:10px;">

          <!-- ØºÙ„Ø§Ù Ø§Ù„Ø¯ÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
          {% if e.course.cover_image_url %}
            <img src="{{ e.course.cover_image_url }}" alt="ØºÙ„Ø§Ù {{ e.course.title }}"
                 style="width:100%;height:160px;object-fit:cover;border-radius:12px;border:1px solid #e5e7eb;">
          {% endif %}

          <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙŠÙØªØ­ ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‚Ø±Ø± Ù„Ù„Ø·Ø§Ù„Ø¨ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… code) -->
          <h3 style="margin:6px 0 6px 0;font-size:18px;line-height:1.4;">
            ğŸ“š
            <a href="{% url 'students:course_detail' e.course.code %}"
               style="text-decoration:none;color:#1f6fd6;">
              {{ e.course.title }}
            </a>
          </h3>

          <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø®ØªØµØ±Ø© -->
          <div style="color:#374151;font-size:14px;">
            <div>Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…: <b>{{ e.joined_at|date:"Y-m-d" }}</b></div>
            {% if e.course.start_date or e.course.end_date %}
              <div style="margin-top:4px;color:#6b7280;">
                Ø§Ù„Ù…Ø¯Ø©:
                <span>{{ e.course.start_date|date:"Y-m-d" }}</span>
                â€“
                <span>{{ e.course.end_date|date:"Y-m-d" }}</span>
              </div>
            {% endif %}
            {% if e.course.subject %}
              <div style="margin-top:4px;color:#6b7280;">
                Ø§Ù„Ù…Ø§Ø¯Ø©: {{ e.course.subject.name }} â€” {{ e.course.subject.stage }}
              </div>
            {% endif %}
          </div>

          <!-- Ø´Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© (Ø¥Ù† ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø­Ù‚Ù„ status ÙÙŠ Enrollment) -->
          {% if e.status %}
            <div style="margin-top:2px;">
              {% if e.status == "active" %}
                <span style="display:inline-block;background:#ecfdf5;color:#065f46;
                             border:1px solid #a7f3d0;border-radius:999px;
                             padding:4px 10px;font-size:12px;">
                  Ù†Ø´Ø·
                </span>
              {% elif e.status == "expired" %}
                <span style="display:inline-block;background:#fef2f2;color:#991b1b;
                             border:1px solid #fecaca;border-radius:999px;
                             padding:4px 10px;font-size:12px;">
                  Ù…Ù†ØªÙ‡ÙŠ
                </span>
              {% else %}
                <span style="display:inline-block;background:#f3f4f6;color:#374151;
                             border:1px solid #e5e7eb;border-radius:999px;
                             padding:4px 10px;font-size:12px;">
                  {{ e.status }}
                </span>
              {% endif %}
            </div>
          {% endif %}

          <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ -->
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap;">
            <a href="{% url 'students:course_detail' e.course.code %}"
               style="text-decoration:none;padding:8px 12px;border-radius:10px;
                      border:1px solid #cfd8dc;background:#fff;color:#37474f;font-weight:600;"
               aria-label="ØªÙØ§ØµÙŠÙ„ Ø¯ÙˆØ±Ø© {{ e.course.title }}">
              ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±Ø©
            </a>

            <!-- Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¹Ø¨Ø± ÙÙŠÙˆ join_course (ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ùˆ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… code -->
            <a href="{% url 'students:join_course' e.course.code %}"
               target="_blank" rel="noopener noreferrer"
               style="text-decoration:none;padding:8px 12px;border-radius:10px;
                      background:#1f6fd6;color:#fff;font-weight:700;border:1px solid #1f6fd6;"
               aria-label="Ø¯Ø®ÙˆÙ„ Ù…Ø¨Ø§Ø´Ø± Ø¥Ù„Ù‰ ØªÙŠÙ…Ø² Ù„Ø¯ÙˆØ±Ø© {{ e.course.title }}">
              Ø¯Ø®ÙˆÙ„ Ù…Ø¨Ø§Ø´Ø± (Teams)
            </a>

            <!-- Ø²Ø± Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ø¹Ø±Ø¶ Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙŠÙ…Ø² Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ -->
            {% if e.course.teams_link %}
              <a href="{{ e.course.teams_link }}" target="_blank" rel="noopener noreferrer"
                 style="text-decoration:none;padding:8px 12px;border-radius:10px;
                        border:1px solid #cfd8dc;background:#fff;color:#37474f;font-weight:600;"
                 aria-label="ÙØªØ­ Ø±Ø§Ø¨Ø· Teams Ù„Ø¯ÙˆØ±Ø© {{ e.course.title }}">
                Ø±Ø§Ø¨Ø· Teams
              </a>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <div style="background:#fff;border:1px dashed #d1d5db;border-radius:12px;padding:20px;color:#6b7280;">
      Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.
    </div>
  {% endif %}
</div>
{% include "footer.html" %}
